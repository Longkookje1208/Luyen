const _0x4f8738=_0x1951;!function(t,n){const e=_0x1951,a=_0x1bea();for(;;)try{if(426567===-parseInt(e(318))/1*(parseInt(e(306))/2)+parseInt(e(285))/3*(-parseInt(e(361))/4)+-parseInt(e(292))/5*(parseInt(e(302))/6)+-parseInt(e(372))/7+-parseInt(e(313))/8+parseInt(e(366))/9*(parseInt(e(370))/10)+parseInt(e(347))/11*(parseInt(e(312))/12))break;a.push(a.shift())}catch(t){a.push(a.shift())}}();const canva=document.getElementById(_0x4f8738(358)),ctxs=canva.getContext("2d"),letters=_0x4f8738(335)[_0x4f8738(356)](""),fontSize=16;let columns=Math[_0x4f8738(303)](window[_0x4f8738(317)]/fontSize);const drops=Array(columns)[_0x4f8738(353)](1);function resizeRainCanvas(){const t=_0x4f8738;canva[t(336)]=window[t(317)],canva.height=window[t(352)],columns=Math[t(303)](canva.width/fontSize),drops[t(299)]=columns,drops[t(353)](1)}function _0x1951(t,n){const e=_0x1bea();return(_0x1951=function(t,n){return e[t-=284]})(t,n)}function drawRainBackground(){const t=_0x4f8738;ctxs[t(371)]=t(363),ctxs[t(341)](0,0,canva[t(336)],canva.height),ctxs.fillStyle="rgb(195, 130, 255)",ctxs[t(330)]=fontSize+t(350);for(let n=0;n<drops[t(299)];n++){const e=letters[Math.floor(Math[t(291)]()*letters.length)];ctxs.fillText(e,n*fontSize,drops[n]*fontSize),(drops[n]*fontSize>canva[t(305)]||Math[t(291)]()>.95)&&(drops[n]=0),drops[n]++}}resizeRainCanvas(),window.addEventListener(_0x4f8738(294),resizeRainCanvas),setInterval(drawRainBackground,50);const nextPageBtn=document[_0x4f8738(314)](_0x4f8738(297)),letterPageBtn=document[_0x4f8738(314)](_0x4f8738(337));function showStickerAndButton(){const t=_0x4f8738;sticker.src&&sticker[t(331)]!==window[t(286)][t(329)]&&""!==sticker[t(331)][t(334)]()&&(sticker[t(321)][t(345)]=t(319),nextPageBtn.style[t(345)]=t(319),letterPageBtn.style.display=t(319))}function hideStickerAndButton(){const t=_0x4f8738;sticker[t(321)].display=t(311),nextPageBtn[t(321)].display=t(311),letterPageBtn.style[t(345)]=t(311)}function morphToNextText(){const t=_0x4f8738;if(currentIndex++,currentIndex>=texts[t(299)])return particles=[],ctx.clearRect(0,0,canvas[t(336)],canvas[t(305)]),canvas.style.display="none",showStickerAndButton(),void(stopAnimation=!0);interpolateParticles(generateDots(texts[currentIndex])),lastMorphTime=Date[t(365)]()}function stopAnimationFunc(){const t=_0x4f8738;rotateWarning[t(321)][t(345)]=t(319),mainCanvas[t(321)].display=t(311),mainSticker[t(321)][t(345)]=t(311),window[t(317)]<=768&&window[t(352)]>window[t(317)]?(nextPageBtn[t(321)][t(345)]=t(319),letterPageBtn[t(321)].display=t(319)):(nextPageBtn.style[t(345)]=t(311),letterPageBtn[t(321)][t(345)]=t(311)),stopAnimation=!0,animationRunning=!1}nextPageBtn[_0x4f8738(360)](_0x4f8738(342),(()=>{const t=_0x4f8738;window[t(286)][t(329)]="./galaxy.html"})),letterPageBtn.addEventListener(_0x4f8738(342),(()=>{const t=_0x4f8738;window[t(286)][t(329)]=t(289)}));const canvas=document[_0x4f8738(314)](_0x4f8738(351)),ctx=canvas[_0x4f8738(332)]("2d"),isMobile=window[_0x4f8738(317)]<768,gap=isMobile?4:5,shapeCanvas=document[_0x4f8738(357)]("canvas");shapeCanvas[_0x4f8738(336)]=canvas[_0x4f8738(336)]=window.innerWidth,shapeCanvas[_0x4f8738(305)]=canvas[_0x4f8738(305)]=window.innerHeight;const shapeCtx=shapeCanvas[_0x4f8738(332)]("2d");let inputText=_0x4f8738(359),gif=_0x4f8738(304);const sticker=document[_0x4f8738(314)]("sticker");gif&&""!==gif.trim()&&(sticker[_0x4f8738(331)]=decodeURIComponent(gif));const bgm=document[_0x4f8738(314)]("bgm"),music=_0x4f8738(322);music&&""!==music[_0x4f8738(334)]()&&(bgm[_0x4f8738(331)]=decodeURIComponent(music),bgm[_0x4f8738(284)]()[_0x4f8738(343)]((()=>{const t=_0x4f8738;console[t(307)](t(324))})),document[_0x4f8738(360)]("click",(()=>{const t=_0x4f8738;bgm.paused&&bgm[t(284)]()[t(343)]((()=>{console[t(307)]("Không thể phát nhạc do trình duyệt.")}))})));const texts=inputText[_0x4f8738(356)]("|").filter((t=>""!==t[_0x4f8738(334)]()));let currentIndex=0,particles=[],morphDelay=600,lastMorphTime=Date[_0x4f8738(365)](),stopAnimation=!1;function getFittedFont(t){const n=_0x4f8738;let e=200;shapeCtx[n(330)]="bold "+e+"px Playpen Sans";let a=shapeCtx.measureText(t[n(301)]("\n","")).width;for(;(a>.9*shapeCanvas.width||e>.8*shapeCanvas.height)&&e>10;)e-=5,shapeCtx[n(330)]=n(300)+e+n(350),a=shapeCtx[n(367)](t[n(301)]("\n",""))[n(336)];return window[n(317)]<400&&(e=Math[n(310)](e,80)),e}function generateDots(t){const n=_0x4f8738;shapeCtx.clearRect(0,0,shapeCanvas.width,shapeCanvas.height);const e=t[n(356)]("\n"),a=getFittedFont(t);shapeCtx[n(330)]="bold "+a+n(350),shapeCtx.fillStyle=n(320),shapeCtx[n(349)]=n(298),shapeCtx[n(288)]="middle";const s=1.2*a,i=s*e[n(299)],o=shapeCanvas[n(305)]/2-i/2+s/2;for(let t=0;t<e[n(299)];t++)shapeCtx[n(346)](e[t],shapeCanvas.width/2,o+t*s);const c=shapeCtx[n(340)](0,0,shapeCanvas[n(336)],shapeCanvas[n(305)])[n(333)],r=[];for(let t=0;t<shapeCanvas.height;t+=gap)for(let e=0;e<shapeCanvas[n(336)];e+=gap){c[4*(t*shapeCanvas[n(336)]+e)+3]>128&&r.push({x:e,y:t})}return r}function interpolateParticles(t){const n=_0x4f8738,e=Math[n(295)](particles[n(299)],t[n(299)]),a=[];for(let s=0;s<e;s++){const e=particles[s%particles.length]||{x:canvas[n(336)]/2,y:canvas[n(305)]/2},i=t[s%t[n(299)]];a[n(369)]({x:e.x,y:e.y,tx:i.x,ty:i.y,progress:0,speed:.03+.02*Math.random()})}particles=a}function updateParticles(){const t=_0x4f8738;for(let n of particles)n[t(348)]<1&&(n[t(348)]+=n[t(287)],n[t(348)]>1&&(n[t(348)]=1)),n.x+=(n.tx-n.x)*n[t(287)],n.y+=(n.ty-n.y)*n[t(287)]}function drawParticles(){const t=_0x4f8738;ctx.clearRect(0,0,canvas[t(336)],canvas[t(305)]);for(let n of particles)ctx[t(371)]=t(368),ctx.beginPath(),ctx[t(364)](n.x,n.y,isMobile?1.3:2.3,0,2*Math.PI),ctx[t(353)]()}function morphToNextText(){const t=_0x4f8738;if(currentIndex++,currentIndex>=texts.length)return particles=[],ctx[t(325)](0,0,canvas[t(336)],canvas[t(305)]),canvas[t(321)][t(345)]=t(311),showStickerAndButton(),void(stopAnimation=!0);interpolateParticles(generateDots(texts[currentIndex])),lastMorphTime=Date.now()}function animate(){const t=_0x4f8738;if(stopAnimation)return;updateParticles(),drawParticles();particles[t(354)]((n=>Math[t(296)](n.x-n.tx)<.5&&Math[t(296)](n.y-n.ty)<.5))&&Date[t(365)]()-lastMorphTime>morphDelay&&morphToNextText(),requestAnimationFrame(animate)}const firstDots=generateDots(texts[0]);function isLandscape(){const t=_0x4f8738;return window[t(317)]>window[t(352)]}particles=firstDots[_0x4f8738(293)]((t=>({x:canvas.width/2,y:canvas.height/2,tx:t.x,ty:t.y,progress:0,speed:.05+.05*Math[_0x4f8738(291)]()}))),canvas.style.display="none",setTimeout((()=>{const t=_0x4f8738;canvas[t(321)].display=t(319),lastMorphTime=Date[t(365)](),animate()}),1e3);const rotateWarning=document[_0x4f8738(314)](_0x4f8738(308)),mainCanvas=canvas,mainSticker=sticker;function _0x1bea(){const t=["appendChild","Chờ người dùng click để phát nhạc.","clearRect","orientationchange","shiftKey","preventDefault","href","font","src","getContext","data","trim","Happy Birthday","width","letterPageBtn","Longkookje1208.github.io","ctrlKey","getImageData","fillRect","click","catch","contextmenu","display","fillText","8795963hoXlNs","progress","textAlign","px Playpen Sans","canvas","innerHeight","fill","every","div","split","createElement","rainCanvas","Chúc mừng|sinh nhật|bạn yêu|🎂","addEventListener","152akSWFT","keydown","rgba(0, 0, 0, 0.05)","arc","now","1125PcQcjr","measureText","white","push","33890kghqSI","fillStyle","1845956ZorCVz","play","51609NKxiLH","location","speed","textBaseline","./letter.html","innerHTML","random","4085315RkpYma","map","resize","max","abs","nextPageBtn","center","length","bold ","replace","6bKXNjl","floor","./img/3.jpg","height","2YxQXiJ","warn","rotateWarning","key","min","none","36rkUHPA","2812472rVPZzN","getElementById","innerText","F12","innerWidth","309913uvdgiU","block","#fff","style","./img/nhac.mp3"];return(_0x1bea=function(){return t})()}let animationRunning=!1;function startAnimation(){const t=_0x4f8738;if(rotateWarning.style[t(345)]=t(311),stopAnimation&&currentIndex>=texts[t(299)])return canvas.style.display=t(311),sticker[t(321)][t(345)]=t(319),void(nextPageBtn[t(321)][t(345)]=t(319));mainCanvas.style[t(345)]=t(319),mainSticker.style[t(345)]="none",stopAnimation=!1,lastMorphTime=Date[t(365)](),!animationRunning&&(animationRunning=!0,animate())}function stopAnimationFunc(){const t=_0x4f8738;rotateWarning[t(321)][t(345)]="block",mainCanvas[t(321)].display=t(311),sticker[t(321)].display!==t(319)&&(mainSticker[t(321)][t(345)]=t(311)),stopAnimation=!0,animationRunning=!1}function checkOrientationAndStart(){isLandscape()?startAnimation():stopAnimationFunc()}function onResizeOrOrientationChange(){const t=_0x4f8738;if(canvas.width=window[t(317)],canvas.height=window[t(352)],shapeCanvas[t(336)]=canvas.width,shapeCanvas[t(305)]=canvas.height,resizeRainCanvas(),texts[currentIndex]){const n=generateDots(texts[currentIndex]);particles=n[t(293)]((n=>({x:canvas.width/2,y:canvas.height/2,tx:n.x,ty:n.y,progress:0,speed:.05+.05*Math[t(291)]()})))}checkOrientationAndStart()}window[_0x4f8738(360)](_0x4f8738(294),onResizeOrOrientationChange),window[_0x4f8738(360)](_0x4f8738(326),onResizeOrOrientationChange),checkOrientationAndStart();const offi=_0x4f8738(338),current=window[_0x4f8738(286)].hostname;if(current!==offi){document.body[_0x4f8738(290)]="";const t=document[_0x4f8738(357)](_0x4f8738(355)),n=document[_0x4f8738(357)](_0x4f8738(355));n[_0x4f8738(315)]=" ",t.appendChild(n),document.body[_0x4f8738(323)](t)}document[_0x4f8738(360)](_0x4f8738(362),(function(t){const n=_0x4f8738;(t[n(309)]===n(316)||t[n(339)]&&t[n(327)]&&("I"===t[n(309)]||"J"===t[n(309)])||t.ctrlKey&&"U"===t.key)&&t.preventDefault()})),document.addEventListener(_0x4f8738(344),(function(t){t[_0x4f8738(328)]()}));