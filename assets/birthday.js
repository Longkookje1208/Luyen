const _0x3e5ae7=_0xc17b;!function(e,t){const n=_0xc17b,a=_0x2982();for(;;)try{if(526530===parseInt(n(254))/1*(parseInt(n(232))/2)+parseInt(n(221))/3*(-parseInt(n(253))/4)+parseInt(n(242))/5+-parseInt(n(246))/6*(-parseInt(n(307))/7)+-parseInt(n(230))/8*(-parseInt(n(290))/9)+parseInt(n(272))/10*(parseInt(n(220))/11)+-parseInt(n(286))/12*(parseInt(n(247))/13))break;a.push(a.shift())}catch(e){a.push(a.shift())}}();const canva=document[_0x3e5ae7(280)](_0x3e5ae7(259)),ctxs=canva[_0x3e5ae7(284)]("2d"),letters=_0x3e5ae7(294).split(""),fontSize=16;let columns=Math[_0x3e5ae7(263)](window[_0x3e5ae7(308)]/fontSize);const drops=Array(columns)[_0x3e5ae7(292)](1);function resizeRainCanvas(){const e=_0x3e5ae7;canva[e(306)]=window.innerWidth,canva.height=window.innerHeight,columns=Math[e(263)](canva[e(306)]/fontSize),drops[e(235)]=columns,drops[e(292)](1)}function drawRainBackground(){const e=_0x3e5ae7;ctxs[e(249)]="rgba(0, 0, 0, 0.05)",ctxs[e(257)](0,0,canva[e(306)],canva.height),ctxs.fillStyle=e(267),ctxs[e(248)]=fontSize+e(283);for(let t=0;t<drops.length;t++){const n=letters[Math[e(263)](Math.random()*letters[e(235)])];ctxs.fillText(n,t*fontSize,drops[t]*fontSize),(drops[t]*fontSize>canva[e(229)]||Math[e(276)]()>.95)&&(drops[t]=0),drops[t]++}}resizeRainCanvas(),window[_0x3e5ae7(289)](_0x3e5ae7(298),resizeRainCanvas),setInterval(drawRainBackground,50);const nextPageBtn=document[_0x3e5ae7(280)](_0x3e5ae7(300)),letterPageBtn=document.getElementById(_0x3e5ae7(237));function showStickerAndButton(){const e=_0x3e5ae7;sticker.src&&sticker[e(238)]!==window.location[e(222)]&&""!==sticker[e(238)][e(260)]()&&(sticker[e(281)].display=e(305),nextPageBtn[e(281)][e(224)]=e(305),letterPageBtn.style.display=e(305))}function hideStickerAndButton(){const e=_0x3e5ae7;sticker[e(281)][e(224)]=e(265),nextPageBtn[e(281)].display=e(265),letterPageBtn.style[e(224)]=e(265)}function morphToNextText(){const e=_0x3e5ae7;if(currentIndex++,currentIndex>=texts.length)return particles=[],ctx[e(251)](0,0,canvas[e(306)],canvas[e(229)]),canvas.style[e(224)]=e(265),showStickerAndButton(),void(stopAnimation=!0);interpolateParticles(generateDots(texts[currentIndex])),lastMorphTime=Date[e(303)]()}function stopAnimationFunc(){const e=_0x3e5ae7;rotateWarning[e(281)][e(224)]=e(305),mainCanvas.style.display=e(265),mainSticker[e(281)][e(224)]=e(265),window.innerWidth<=768&&window[e(239)]>window[e(308)]?(nextPageBtn[e(281)][e(224)]=e(305),letterPageBtn[e(281)][e(224)]=e(305)):(nextPageBtn[e(281)][e(224)]=e(265),letterPageBtn[e(281)].display="none"),stopAnimation=!0,animationRunning=!1}nextPageBtn[_0x3e5ae7(289)]("click",(()=>{const e=_0x3e5ae7;window.location.href=e(250)})),letterPageBtn[_0x3e5ae7(289)](_0x3e5ae7(223),(()=>{const e=_0x3e5ae7;window[e(287)][e(222)]=e(266)}));const canvas=document[_0x3e5ae7(280)](_0x3e5ae7(279)),ctx=canvas[_0x3e5ae7(284)]("2d"),isMobile=window.innerWidth<768,gap=isMobile?4:5,shapeCanvas=document[_0x3e5ae7(274)]("canvas");shapeCanvas[_0x3e5ae7(306)]=canvas[_0x3e5ae7(306)]=window.innerWidth,shapeCanvas[_0x3e5ae7(229)]=canvas[_0x3e5ae7(229)]=window[_0x3e5ae7(239)];const shapeCtx=shapeCanvas[_0x3e5ae7(284)]("2d");let inputText=_0x3e5ae7(273),gif=_0x3e5ae7(296);const sticker=document[_0x3e5ae7(280)]("sticker");gif&&""!==gif.trim()&&(sticker.src=decodeURIComponent(gif));const bgm=document[_0x3e5ae7(280)](_0x3e5ae7(226)),music="./img/Sn.mp3";music&&""!==music[_0x3e5ae7(260)]()&&(bgm[_0x3e5ae7(238)]=decodeURIComponent(music),bgm.play()[_0x3e5ae7(275)]((()=>{const e=_0x3e5ae7;console[e(282)](e(270))})),document[_0x3e5ae7(289)](_0x3e5ae7(223),(()=>{const e=_0x3e5ae7;bgm[e(288)]&&bgm[e(291)]().catch((()=>{console[e(282)]("Không thể phát nhạc do trình duyệt.")}))})));const texts=inputText[_0x3e5ae7(234)]("|")[_0x3e5ae7(233)]((e=>""!==e[_0x3e5ae7(260)]()));let currentIndex=0,particles=[],morphDelay=600,lastMorphTime=Date[_0x3e5ae7(303)](),stopAnimation=!1;function getFittedFont(e){const t=_0x3e5ae7;let n=200;shapeCtx.font=t(299)+n+"px Playpen Sans";let a=shapeCtx[t(262)](e.replace("\n","")).width;for(;(a>.9*shapeCanvas[t(306)]||n>.8*shapeCanvas[t(229)])&&n>10;)n-=5,shapeCtx.font=t(299)+n+t(283),a=shapeCtx[t(262)](e[t(285)]("\n","")).width;return window[t(308)]<400&&(n=Math[t(240)](n,80)),n}function generateDots(e){const t=_0x3e5ae7;shapeCtx.clearRect(0,0,shapeCanvas[t(306)],shapeCanvas.height);const n=e.split("\n"),a=getFittedFont(e);shapeCtx[t(248)]=t(299)+a+t(283),shapeCtx[t(249)]="#fff",shapeCtx.textAlign="center",shapeCtx[t(304)]=t(297);const s=1.2*a,i=s*n[t(235)],o=shapeCanvas[t(229)]/2-i/2+s/2;for(let e=0;e<n[t(235)];e++)shapeCtx[t(245)](n[e],shapeCanvas[t(306)]/2,o+e*s);const c=shapeCtx[t(261)](0,0,shapeCanvas.width,shapeCanvas[t(229)])[t(271)],r=[];for(let e=0;e<shapeCanvas[t(229)];e+=gap)for(let n=0;n<shapeCanvas[t(306)];n+=gap){c[4*(e*shapeCanvas[t(306)]+n)+3]>128&&r[t(278)]({x:n,y:e})}return r}function _0xc17b(e,t){const n=_0x2982();return(_0xc17b=function(e,t){return n[e-=220]})(e,t)}function interpolateParticles(e){const t=_0x3e5ae7,n=Math[t(255)](particles.length,e[t(235)]),a=[];for(let s=0;s<n;s++){const n=particles[s%particles[t(235)]]||{x:canvas.width/2,y:canvas.height/2},i=e[s%e[t(235)]];a.push({x:n.x,y:n.y,tx:i.x,ty:i.y,progress:0,speed:.03+.02*Math.random()})}particles=a}function updateParticles(){const e=_0x3e5ae7;for(let t of particles)t.progress<1&&(t[e(302)]+=t[e(256)],t[e(302)]>1&&(t[e(302)]=1)),t.x+=(t.tx-t.x)*t[e(256)],t.y+=(t.ty-t.y)*t[e(256)]}function drawParticles(){const e=_0x3e5ae7;ctx[e(251)](0,0,canvas.width,canvas[e(229)]);for(let t of particles)ctx[e(249)]="white",ctx[e(227)](),ctx[e(252)](t.x,t.y,isMobile?1.3:2.3,0,2*Math.PI),ctx[e(292)]()}function morphToNextText(){const e=_0x3e5ae7;if(currentIndex++,currentIndex>=texts[e(235)])return particles=[],ctx[e(251)](0,0,canvas.width,canvas[e(229)]),canvas[e(281)][e(224)]="none",showStickerAndButton(),void(stopAnimation=!0);interpolateParticles(generateDots(texts[currentIndex])),lastMorphTime=Date[e(303)]()}function animate(){const e=_0x3e5ae7;if(stopAnimation)return;updateParticles(),drawParticles();particles[e(258)]((t=>Math[e(236)](t.x-t.tx)<.5&&Math.abs(t.y-t.ty)<.5))&&Date.now()-lastMorphTime>morphDelay&&morphToNextText(),requestAnimationFrame(animate)}const firstDots=generateDots(texts[0]);function isLandscape(){const e=_0x3e5ae7;return window.innerWidth>window[e(239)]}particles=firstDots[_0x3e5ae7(243)]((e=>({x:canvas[_0x3e5ae7(306)]/2,y:canvas.height/2,tx:e.x,ty:e.y,progress:0,speed:.05+.05*Math[_0x3e5ae7(276)]()}))),canvas[_0x3e5ae7(281)][_0x3e5ae7(224)]=_0x3e5ae7(265),setTimeout((()=>{const e=_0x3e5ae7;canvas.style[e(224)]="block",lastMorphTime=Date[e(303)](),animate()}),1e3);const rotateWarning=document[_0x3e5ae7(280)](_0x3e5ae7(269)),mainCanvas=canvas,mainSticker=sticker;let animationRunning=!1;function startAnimation(){const e=_0x3e5ae7;if(rotateWarning[e(281)][e(224)]=e(265),stopAnimation&&currentIndex>=texts[e(235)])return canvas[e(281)][e(224)]=e(265),sticker.style[e(224)]=e(305),void(nextPageBtn[e(281)].display=e(305));mainCanvas.style.display="block",mainSticker[e(281)][e(224)]=e(265),stopAnimation=!1,lastMorphTime=Date.now(),!animationRunning&&(animationRunning=!0,animate())}function stopAnimationFunc(){const e=_0x3e5ae7;rotateWarning.style.display=e(305),mainCanvas.style[e(224)]="none",sticker[e(281)][e(224)]!==e(305)&&(mainSticker[e(281)][e(224)]=e(265)),stopAnimation=!0,animationRunning=!1}function checkOrientationAndStart(){isLandscape()?startAnimation():stopAnimationFunc()}function _0x2982(){const e=["rotateWarning","Chờ người dùng click để phát nhạc.","data","280NfXAlj","Chúc mừng|sinh nhật|bạn yêu|🎂","createElement","catch","random","shiftKey","push","canvas","getElementById","style","warn","px Playpen Sans","getContext","replace","12lLFfuq","location","paused","addEventListener","14373IOmvQU","play","fill","key","Happy Birthday","innerHTML","./img/3.jpg","middle","resize","bold ","nextPageBtn","body","progress","now","textBaseline","block","width","917175MhSPsQ","innerWidth","120340kLdhxZ","87CaEGQx","href","click","display","innerText","bgm","beginPath","div","height","616pCcKCU","keydown","106670UGLKYi","filter","split","length","abs","letterPageBtn","src","innerHeight","min","ctrlKey","3433450wjnRLo","map","longkookje1208.github.io","fillText","24JXVidA","21277139mwIqJT","font","fillStyle","./galaxy.html","clearRect","arc","23476aWyrwO","13nUjmTH","max","speed","fillRect","every","rainCanvas","trim","getImageData","measureText","floor","appendChild","none","./letter.html","rgb(195, 130, 255)","preventDefault"];return(_0x2982=function(){return e})()}function onResizeOrOrientationChange(){const e=_0x3e5ae7;if(canvas[e(306)]=window[e(308)],canvas[e(229)]=window[e(239)],shapeCanvas[e(306)]=canvas.width,shapeCanvas[e(229)]=canvas.height,resizeRainCanvas(),texts[currentIndex]){const t=generateDots(texts[currentIndex]);particles=t[e(243)]((t=>({x:canvas[e(306)]/2,y:canvas.height/2,tx:t.x,ty:t.y,progress:0,speed:.05+.05*Math[e(276)]()})))}checkOrientationAndStart()}window.addEventListener(_0x3e5ae7(298),onResizeOrOrientationChange),window[_0x3e5ae7(289)]("orientationchange",onResizeOrOrientationChange),checkOrientationAndStart();const offi=_0x3e5ae7(244),current=window.location.hostname;if(current!==offi){document.body[_0x3e5ae7(295)]="";const e=document[_0x3e5ae7(274)](_0x3e5ae7(228)),t=document[_0x3e5ae7(274)]("div");t[_0x3e5ae7(225)]=" ",e[_0x3e5ae7(264)](t),document[_0x3e5ae7(301)][_0x3e5ae7(264)](e)}document[_0x3e5ae7(289)](_0x3e5ae7(231),(function(e){const t=_0x3e5ae7;("F12"===e[t(293)]||e[t(241)]&&e[t(277)]&&("I"===e[t(293)]||"J"===e[t(293)])||e[t(241)]&&"U"===e[t(293)])&&e[t(268)]()})),document[_0x3e5ae7(289)]("contextmenu",(function(e){e[_0x3e5ae7(268)]()}));
