const _0xe26706=_0x161e;!function(e,t){const n=_0x161e,a=_0x49ee();for(;;)try{if(115743===parseInt(n(419))/1+parseInt(n(438))/2+parseInt(n(550))/3*(-parseInt(n(414))/4)+parseInt(n(547))/5+-parseInt(n(540))/6+-parseInt(n(427))/7+parseInt(n(523))/8)break;a.push(a.shift())}catch(e){a.push(a.shift())}}();import*as _0x4ccb9e from"three";import{OrbitControls}from"three/addons/controls/OrbitControls.js";import{FontLoader}from"three/examples/jsm/loaders/FontLoader.js";import{TextGeometry}from"three/examples/jsm/geometries/TextGeometry.js";function _0x49ee(){const e=["width","hsla(","other","Số lượng ảnh: ","distanceTo","F12","\n        varying vec3 vNormal;\n        uniform vec3 glowColor;\n        void main() {\n            float intensity = pow(0.7 - dot(vNormal, vec3(0.0, 0.0, 1.0)), 2.0);\n            gl_FragColor = vec4(glowColor, 1.0) * intensity;\n        }\n    ","initialAngle","minDistance","rotation","Image","opacity","shadowBlur","Anonymous","progress","getAttribute","ringTexts","fontScale","AdditiveBlending","hostname","update","rgba(0,0,0,0)","beginPath","getMaxAnisotropy","pitchAmplitude","DOMContentLoaded","wrapS","traverse","#e0b3ff","isGroup","log","Raycaster","pow","name","LinearFilter","material","strokeStyle","Line","arcTo","floor","preventDefault","Group","BufferGeometry","MeshBasicMaterial","BufferAttribute","center","randomnessPower","anisotropy","./img/4.jpg","lineTo","min","#b2ff59","remove","clearRect","rollAmplitude","latin","innerText","filter","mozRequestFullScreen","angleOffset","4ksdobY","Sprite","#f48fb1","setPixelRatio","colorSpace","165544AwZCAr","ontouchstart","setFromPoints","tiltSpeed","rgba(180, 120, 200, ","rgba(220, 180, 255, 0.5)","main-planet","body","530824Lzgwyx","addScaledVector","lerp","lookAt","shadowColor","main-glow","getBoundingClientRect","curve","speed","arms","time","191268DqIolh","trail","\n            varying vec3 vNormal;\n            void main() {\n                vNormal = normalize(normalMatrix * normal);\n                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }\n        ","render","requestFullscreen","renderOrder","isPoints","random","textBaseline","src","rollSpeed","WebGLRenderer","style","insideColor","measureText","#e1aaff","fillRect","textAlign","SpriteMaterial","sin","trailPoints","autoRotate","count","Color","fragmentShader","Shape","enableDamping","setSize","enablePan","getZ","SRGBColorSpace","\n        uniform float time;\n        uniform sampler2D baseTexture;\n        varying vec2 vUv;\n        void main() {\n            vec2 uv = vUv;\n            float angle = length(uv - vec2(0.5)) * 3.0;\n            float twist = sin(angle * 3.0 + time) * 0.1;\n            uv.x += twist * sin(time * 0.5);\n            uv.y += twist * cos(time * 0.5);\n            vec4 texColor = texture2D(baseTexture, uv);\n            float noise = sin(uv.x * 10.0 + time) * sin(uv.y * 10.0 + time) * 0.1;\n            texColor.rgb += noise * vec3(0.8, 0.4, 0.2);\n            gl_FragColor = texColor;\n        }\n    ",", 80%, 50%, 0.6)","ShapeGeometry","slice","middle","clone","gesturestart","ShaderMaterial","drawImage","rotateSpeed","crossOrigin","set","click","bold ","initialPosition","maxLife","value","fillText","materialNear","charCodeAt","heartImages","head","target","color","top","Mesh",", Điểm mỗi ảnh: ","life","Points","cjk","portrait-mode","onload","setFromCamera","touchmove","max","tiltPhase","tiltAmplitude","fillStyle","\n        uniform float uSize;\n        uniform float uTime;\n        uniform float uRippleTime;\n        uniform float uRippleSpeed;\n        uniform float uRippleWidth;\n\n        varying vec3 vColor;\n\n        void main() {\n            // Lấy màu gốc từ geometry (giống hệt vertexColors: true)\n            vColor = color;\n\n            vec4 modelPosition = modelMatrix * vec4(position, 1.0);\n\n            // ---- LOGIC HIỆU ỨNG GỢN SÓNG ----\n            if (uRippleTime > 0.0) {\n                float rippleRadius = (uTime - uRippleTime) * uRippleSpeed;\n                float particleDist = length(modelPosition.xyz);\n\n                float strength = 1.0 - smoothstep(rippleRadius - uRippleWidth, rippleRadius + uRippleWidth, particleDist);\n                strength *= smoothstep(rippleRadius + uRippleWidth, rippleRadius - uRippleWidth, particleDist);\n\n                if (strength > 0.0) {\n                    vColor += vec3(strength * 2.0); // Làm màu sáng hơn khi sóng đi qua\n                }\n            }\n\n            vec4 viewPosition = viewMatrix * modelPosition;\n            gl_Position = projectionMatrix * viewPosition;\n            // Dòng này làm cho các hạt nhỏ hơn khi ở xa, mô phỏng hành vi của PointsMaterial\n            gl_PointSize = uSize / -viewPosition.z;\n        }\n    ","createElement","addColorStop","rgba(255,255,255,0.8)","materialFar","intro-started","getContext","data","uniforms","setAttribute","location","Scene","maxDistance","points","./img/2.jpg","trailLength","1571600hJjdhb","spin","domElement","clientX","starfield","translate","appendChild","getWorldPosition","spacingScale","cos","ceil","div","autoRotateSpeed","getY","splice","moveTo","push","794778JQIaNT","getPoint","contextmenu","addEventListener","innerWidth","closePath","randomness","400585VASBKr","SphereGeometry","pitchPhase","641121qAEMdx","container","Longkookje1208.github.io","length","BackSide","type","intersectObject","blur(2px)","AmbientLight","hint-icon-group","multiplyScalar","userData","outputColorSpace","enabled","DoubleSide","CanvasTexture","classList","PointsMaterial","msRequestFullscreen","clip","add","\n        varying vec2 vUv;\n        void main() {\n            vUv = uv;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n    ","magFilter","outsideColor","transparent","NormalBlending","#a259f7","ringMesh","position","geometry","pitchSpeed","resize","strokeText","height","LineBasicMaterial","RepeatWrapping","radius","orientationchange","innerHeight","   ","key","visible","devicePixelRatio","#f8bbd0","#f06292","dataLove2Loveloom","\n            varying vec3 vNormal;\n            uniform float time;\n            void main() {\n                float intensity = pow(0.7 - dot(vNormal, vec3(0.0, 0.0, 1.0)), 2.0);\n                gl_FragColor = vec4(1.0, 1.0, 1.0, intensity * (0.8 + sin(time * 5.0) * 0.2));\n            }\n        ","copy","intersectObjects","needsUpdate","fog","ctrlKey","documentElement","Vector3","Vector2","getPixelRatio","getX","forEach","stroke","px Arial, sans-serif","lineWidth","left","#ffb3de","geometryNear","scale","object","isTextRing","innerHTML","textRings","createRadialGradient","white","PlaneGeometry","#ffffff","alphabetic","FogExp2","getElementById","now","Galaxy","children","getWorldDirection","rgba(255, 200, 220, 0.8)","canvas","parent","setDrawRange","restore","ringRadius"];return(_0x49ee=function(){return e})()}const scene=new(_0x4ccb9e[_0xe26706(518)]);scene[_0xe26706(318)]=new(_0x4ccb9e[_0xe26706(342)])(0,.0015);const camera=new _0x4ccb9e.PerspectiveCamera(75,window[_0xe26706(544)]/window.innerHeight,.1,1e5);camera.position[_0xe26706(480)](0,20,30);const renderer=new(_0x4ccb9e[_0xe26706(449)])({antialias:!0});function _0x161e(e,t){const n=_0x49ee();return(_0x161e=function(e,t){return n[e-=309]})(e,t)}renderer[_0xe26706(465)](window[_0xe26706(544)],window.innerHeight),renderer[_0xe26706(417)](Math[_0xe26706(404)](window[_0xe26706(310)],2)),renderer[_0xe26706(562)]=_0x4ccb9e[_0xe26706(468)],document[_0xe26706(343)](_0xe26706(551))[_0xe26706(529)](renderer.domElement);const controls=new OrbitControls(camera,renderer[_0xe26706(525)]);function createGlowMaterial(e,t=128,n=.55){const a=_0xe26706,o=document.createElement(a(349));o[a(354)]=o[a(583)]=t;const r=o[a(513)]("2d"),i=r[a(337)](t/2,t/2,0,t/2,t/2,t/2);i[a(509)](0,e),i[a(509)](1,a(375)),r.fillStyle=i,r[a(454)](0,0,t,t);const c=new(_0x4ccb9e[a(565)])(o),s=new(_0x4ccb9e[a(456)])({map:c,transparent:!0,opacity:n,depthWrite:!1,blending:_0x4ccb9e[a(372)]});return new(_0x4ccb9e[a(415)])(s)}controls[_0xe26706(464)]=!0,controls[_0xe26706(459)]=!0,controls[_0xe26706(535)]=.1,controls[_0xe26706(563)]=!1,controls.target[_0xe26706(480)](0,0,0),controls[_0xe26706(466)]=!1,controls[_0xe26706(362)]=15,controls[_0xe26706(519)]=300,controls.zoomSpeed=.3,controls[_0xe26706(478)]=.3,controls[_0xe26706(374)]();const centralGlow=createGlowMaterial(_0xe26706(510),156,.25);centralGlow[_0xe26706(332)].set(8,8,1),scene.add(centralGlow);for(let e=0;e<15;e++){const e=360*Math[_0xe26706(445)](),t=createGlowMaterial(_0xe26706(355)+e+_0xe26706(470),256);t[_0xe26706(332)][_0xe26706(480)](100,100,1),t[_0xe26706(578)][_0xe26706(480)](175*(Math[_0xe26706(445)]()-.5),175*(Math[_0xe26706(445)]()-.5),175*(Math[_0xe26706(445)]()-.5)),scene.add(t)}const galaxyParameters={count:1e5,arms:6,radius:100,spin:.5,randomness:.2,randomnessPower:20,insideColor:new(_0x4ccb9e[_0xe26706(461)])(14040790),outsideColor:new(_0x4ccb9e[_0xe26706(461)])(4765880)},heartImages=[...window.dataLove2Loveloom&&window[_0xe26706(313)][_0xe26706(514)].heartImages?window.dataLove2Loveloom[_0xe26706(514)][_0xe26706(489)]:[],"./img/1.jpg",_0xe26706(521),"./img/3.jpg",_0xe26706(402)],textureLoader=new _0x4ccb9e.TextureLoader,numGroups=heartImages[_0xe26706(553)],maxDensity=15e3,minDensity=4e3,maxGroupsForScale=6;let pointsPerGroup;if(numGroups<=1)pointsPerGroup=15e3;else if(numGroups>=6)pointsPerGroup=4e3;else{const e=(numGroups-1)/5;pointsPerGroup=Math[_0xe26706(393)](15e3*(1-e)+4e3*e)}pointsPerGroup*numGroups>galaxyParameters[_0xe26706(460)]&&(pointsPerGroup=Math[_0xe26706(393)](galaxyParameters[_0xe26706(460)]/numGroups)),console[_0xe26706(384)](_0xe26706(357)+numGroups+_0xe26706(495)+pointsPerGroup);const positions=new Float32Array(3*galaxyParameters.count),colors=new Float32Array(3*galaxyParameters.count);let pointIdx=0;for(let e=0;e<galaxyParameters.count;e++){const t=Math[_0xe26706(386)](Math[_0xe26706(445)](),galaxyParameters[_0xe26706(400)])*galaxyParameters.radius,n=e%galaxyParameters.arms/galaxyParameters[_0xe26706(436)]*Math.PI*2,a=t*galaxyParameters[_0xe26706(524)],o=(Math[_0xe26706(445)]()-.5)*galaxyParameters.randomness*t,r=(Math.random()-.5)*galaxyParameters[_0xe26706(546)]*t*.5,i=(Math[_0xe26706(445)]()-.5)*galaxyParameters[_0xe26706(546)]*t,c=n+a;if(t<30&&Math[_0xe26706(445)]()<.7)continue;const s=3*pointIdx;positions[s]=Math[_0xe26706(532)](c)*t+o,positions[s+1]=r,positions[s+2]=Math[_0xe26706(457)](c)*t+i;const l=new(_0x4ccb9e[_0xe26706(461)])(16738047);l[_0xe26706(429)](new(_0x4ccb9e[_0xe26706(461)])(6750207),t/galaxyParameters[_0xe26706(586)]),l[_0xe26706(560)](.7+.3*Math[_0xe26706(445)]()),colors[s]=l.r,colors[s+1]=l.g,colors[s+2]=l.b,pointIdx++}const galaxyGeometry=new(_0x4ccb9e[_0xe26706(396)]);galaxyGeometry[_0xe26706(516)](_0xe26706(578),new(_0x4ccb9e[_0xe26706(398)])(positions[_0xe26706(472)](0,3*pointIdx),3)),galaxyGeometry[_0xe26706(516)](_0xe26706(492),new(_0x4ccb9e[_0xe26706(398)])(colors[_0xe26706(472)](0,3*pointIdx),3));const galaxyMaterial=new(_0x4ccb9e[_0xe26706(476)])({uniforms:{uTime:{value:0},uSize:{value:50*renderer[_0xe26706(323)]()},uRippleTime:{value:-1},uRippleSpeed:{value:40},uRippleWidth:{value:20}},vertexShader:_0xe26706(507),fragmentShader:"\n        varying vec3 vColor;\n        void main() {\n            // Làm cho các hạt có hình tròn thay vì hình vuông\n            float dist = length(gl_PointCoord - vec2(0.5));\n            if (dist > 0.5) discard;\n\n            gl_FragColor = vec4(vColor, 1.0);\n        }\n    ",blending:_0x4ccb9e.AdditiveBlending,depthWrite:!1,transparent:!0,vertexColors:!0}),galaxy=new(_0x4ccb9e[_0xe26706(497)])(galaxyGeometry,galaxyMaterial);function createNeonTexture(e,t){const n=_0xe26706,a=window[n(310)]||1,o=document[n(508)](n(349));o[n(354)]=o[n(583)]=t*a,o.style.width=o.style[n(583)]=t+"px";const r=o[n(513)]("2d");r.scale(a,a);const i=e.width/e.height;let c,s,l,x;i>1?(c=t,s=t/i,l=0,x=(t-s)/2):(s=t,c=t*i,l=(t-c)/2,x=0),r[n(407)](0,0,t,t);const d=.1*t;r.save(),r[n(376)](),r[n(538)](l+d,x),r.lineTo(l+c-d,x),r[n(392)](l+c,x,l+c,x+d,d),r[n(403)](l+c,x+s-d),r.arcTo(l+c,x+s,l+c-d,x+s,d),r.lineTo(l+d,x+s),r[n(392)](l,x+s,l,x+s-d,d),r[n(403)](l,x+d),r[n(392)](l,x,l+d,x,d),r[n(545)](),r[n(569)](),r[n(477)](e,l,x,c,s),r[n(352)]();const m=new(_0x4ccb9e[n(565)])(o);return m.minFilter=_0x4ccb9e[n(388)],m[n(572)]=_0x4ccb9e.LinearFilter,m[n(401)]=renderer.capabilities[n(377)](),m[n(418)]=_0x4ccb9e.SRGBColorSpace,m}scene[_0xe26706(570)](galaxy);for(let e=0;e<numGroups;e++){const t=new Float32Array(3*pointsPerGroup),n=new Float32Array(3*pointsPerGroup),a=new Float32Array(3*pointsPerGroup);let o=0;for(let r=0;r<pointsPerGroup;r++){const i=3*o,c=e*pointsPerGroup+r,s=Math[_0xe26706(386)](Math.random(),galaxyParameters[_0xe26706(400)])*galaxyParameters.radius;if(s<30)continue;const l=c%galaxyParameters[_0xe26706(436)]/galaxyParameters[_0xe26706(436)]*Math.PI*2,x=s*galaxyParameters[_0xe26706(524)],d=(Math[_0xe26706(445)]()-.5)*galaxyParameters[_0xe26706(546)]*s,m=(Math[_0xe26706(445)]()-.5)*galaxyParameters.randomness*s*.5,_=(Math[_0xe26706(445)]()-.5)*galaxyParameters[_0xe26706(546)]*s,p=l+x;t[i]=Math[_0xe26706(532)](p)*s+d,t[i+1]=m,t[i+2]=Math[_0xe26706(457)](p)*s+_;const u=new(_0x4ccb9e[_0xe26706(461)])(16777215);n[i]=u.r,n[i+1]=u.g,n[i+2]=u.b;const h=galaxyParameters[_0xe26706(451)][_0xe26706(474)]();h[_0xe26706(429)](galaxyParameters[_0xe26706(573)],s/galaxyParameters[_0xe26706(586)]),h[_0xe26706(560)](.7+.3*Math.random()),a[i]=h.r,a[i+1]=h.g,a[i+2]=h.b,o++}if(0===o)continue;const r=new(_0x4ccb9e[_0xe26706(396)]);r.setAttribute(_0xe26706(578),new(_0x4ccb9e[_0xe26706(398)])(t[_0xe26706(472)](0,3*o),3)),r[_0xe26706(516)](_0xe26706(492),new(_0x4ccb9e[_0xe26706(398)])(n[_0xe26706(472)](0,3*o),3));const i=new(_0x4ccb9e[_0xe26706(396)]);i[_0xe26706(516)](_0xe26706(578),new(_0x4ccb9e[_0xe26706(398)])(t[_0xe26706(472)](0,3*o),3)),i[_0xe26706(516)]("color",new(_0x4ccb9e[_0xe26706(398)])(a[_0xe26706(472)](0,3*o),3));const c=i[_0xe26706(369)](_0xe26706(578));let s=0,l=0,x=0;for(let e=0;e<c[_0xe26706(460)];e++)s+=c[_0xe26706(324)](e),l+=c[_0xe26706(536)](e),x+=c.getZ(e);s/=c[_0xe26706(460)],l/=c.count,x/=c[_0xe26706(460)],r[_0xe26706(528)](-s,-l,-x),i[_0xe26706(528)](-s,-l,-x);const d=new(window[_0xe26706(364)]);d[_0xe26706(479)]=_0xe26706(367),d[_0xe26706(447)]=heartImages[e],d[_0xe26706(500)]=()=>{const e=_0xe26706,t=createNeonTexture(d,256),n=new(_0x4ccb9e[e(567)])({size:1.8,map:t,transparent:!1,alphaTest:.2,depthWrite:!0,depthTest:!0,blending:_0x4ccb9e[e(575)],vertexColors:!0}),a=new(_0x4ccb9e[e(567)])({size:1.8,map:t,transparent:!0,alphaTest:.2,depthWrite:!1,blending:_0x4ccb9e[e(372)],vertexColors:!0}),o=new(_0x4ccb9e[e(497)])(i,a);o.position.set(s,l,x),o.userData.materialNear=n,o.userData[e(331)]=r,o.userData[e(511)]=a,o.userData.geometryFar=i,scene[e(570)](o)}}const ambientLight=new(_0x4ccb9e[_0xe26706(558)])(16777215,.2);scene[_0xe26706(570)](ambientLight);const starCount=2e4,starGeometry=new(_0x4ccb9e[_0xe26706(396)]),starPositions=new Float32Array(6e4);for(let e=0;e<2e4;e++)starPositions[3*e]=900*(Math.random()-.5),starPositions[3*e+1]=900*(Math[_0xe26706(445)]()-.5),starPositions[3*e+2]=900*(Math[_0xe26706(445)]()-.5);starGeometry[_0xe26706(516)](_0xe26706(578),new(_0x4ccb9e[_0xe26706(398)])(starPositions,3));const starMaterial=new _0x4ccb9e.PointsMaterial({color:16777215,size:.7,transparent:!0,opacity:.7,depthWrite:!1}),starField=new _0x4ccb9e.Points(starGeometry,starMaterial);starField[_0xe26706(387)]=_0xe26706(527),starField[_0xe26706(443)]=999,scene[_0xe26706(570)](starField);let shootingStars=[];function createShootingStar(){const e=_0xe26706,t=new(_0x4ccb9e[e(548)])(2,32,32),n=new(_0x4ccb9e[e(397)])({color:16777215,transparent:!0,opacity:0,blending:_0x4ccb9e[e(372)]}),a=new(_0x4ccb9e[e(494)])(t,n),o=new(_0x4ccb9e[e(548)])(3,32,32),r=new(_0x4ccb9e[e(476)])({uniforms:{time:{value:0}},vertexShader:e(440),fragmentShader:e(314),transparent:!0,blending:_0x4ccb9e.AdditiveBlending,side:_0x4ccb9e[e(554)]}),i=new(_0x4ccb9e[e(494)])(o,r);a[e(570)](i);const c=new(_0x4ccb9e[e(548)])(1.05*planetRadius,48,48),s=new _0x4ccb9e.ShaderMaterial({uniforms:{glowColor:{value:new(_0x4ccb9e[e(461)])(14726143)}},vertexShader:"\n        varying vec3 vNormal;\n        void main() {\n            vNormal = normalize(normalMatrix * normal);\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n    ",fragmentShader:e(360),side:_0x4ccb9e[e(554)],blending:_0x4ccb9e[e(372)],transparent:!0}),l=new(_0x4ccb9e[e(494)])(c,s);planet[e(570)](l);const x=createRandomCurve(),d=[];for(let t=0;t<100;t++){const n=t/99;d[e(539)](x.getPoint(n))}const m=(new(_0x4ccb9e[e(396)]))[e(421)](d),_=new(_0x4ccb9e[e(584)])({color:10087167,transparent:!0,opacity:.7,linewidth:2}),p=new(_0x4ccb9e[e(391)])(m,_),u=new(_0x4ccb9e[e(395)]);u.add(a),u.add(p),u.userData={curve:x,progress:0,speed:.001+.001*Math[e(445)](),life:0,maxLife:300,head:a,trail:p,trailLength:100,trailPoints:d},scene[e(570)](u),shootingStars.push(u)}function createRandomCurve(){const e=_0xe26706,t=new(_0x4ccb9e[e(321)])(100*Math[e(445)]()-200,200*Math[e(445)]()-100,200*Math[e(445)]()-100),n=new _0x4ccb9e.Vector3(600+200*Math[e(445)](),t.y+(200*Math[e(445)]()-100),t.z+(200*Math[e(445)]()-100)),a=new _0x4ccb9e.Vector3(t.x+200+100*Math[e(445)](),t.y+(100*Math[e(445)]()-50),t.z+(100*Math.random()-50)),o=new(_0x4ccb9e[e(321)])(n.x-200+100*Math[e(445)](),n.y+(100*Math.random()-50),n.z+(100*Math[e(445)]()-50));return[][e(539)](t,a,o,n),new _0x4ccb9e.CubicBezierCurve3(t,a,o,n)}function createPlanetTexture(e=512){const t=_0xe26706,n=document.createElement(t(349));n[t(354)]=n.height=e;const a=n[t(513)]("2d"),o=a[t(337)](e/2,e/2,e/8,e/2,e/2,e/2);o[t(509)](0,t(311)),o[t(509)](.12,t(416)),o[t(509)](.22,t(312)),o[t(509)](.35,"#ffffff"),o[t(509)](.5,t(453)),o.addColorStop(.62,t(576)),o[t(509)](.75,t(405)),o[t(509)](1,"#3fd8c7"),a[t(506)]=o,a.fillRect(0,0,e,e);const r=["#f8bbd0",t(311),"#f48fb1","#f48fb1",t(312),t(312),t(340),"#e1aaff",t(576),t(405)];for(let n=0;n<40;n++){const n=Math.random()*e,o=Math.random()*e,i=30+120*Math[t(445)](),c=r[Math[t(393)](Math[t(445)]()*r[t(553)])],s=a.createRadialGradient(n,o,0,n,o,i);s.addColorStop(0,c+"cc"),s[t(509)](1,c+"00"),a.fillStyle=s,a.fillRect(0,0,e,e)}for(let n=0;n<8;n++)a[t(376)](),a.moveTo(Math.random()*e,Math[t(445)]()*e),a.bezierCurveTo(Math.random()*e,Math[t(445)]()*e,Math[t(445)]()*e,Math.random()*e,Math.random()*e,Math[t(445)]()*e),a[t(390)]=t(423)+(.12+.18*Math[t(445)]())+")",a[t(328)]=8+18*Math[t(445)](),a[t(326)]();return void 0!==a.filter&&(a[t(411)]=t(557),a[t(477)](n,0,0),a.filter="none"),new _0x4ccb9e.CanvasTexture(n)}const stormShader={uniforms:{time:{value:0},baseTexture:{value:null}},vertexShader:_0xe26706(571),fragmentShader:_0xe26706(469)},planetRadius=10,planetGeometry=new _0x4ccb9e.SphereGeometry(planetRadius,48,48),planetTexture=createPlanetTexture(),planetMaterial=new _0x4ccb9e.ShaderMaterial({uniforms:{time:{value:0},baseTexture:{value:planetTexture}},vertexShader:stormShader.vertexShader,fragmentShader:stormShader[_0xe26706(462)]}),planet=new(_0x4ccb9e[_0xe26706(494)])(planetGeometry,planetMaterial);planet[_0xe26706(578)][_0xe26706(480)](0,0,0),scene.add(planet);const ringTexts=[_0xe26706(345),"love",...window[_0xe26706(313)]&&window[_0xe26706(313)].data[_0xe26706(370)]?window[_0xe26706(313)].data[_0xe26706(370)]:[]];function createTextRings(){const e=_0xe26706,t=ringTexts[e(553)],n=1.1*planetRadius;window.textRings=[];for(let o=0;o<t;o++){const r=ringTexts[o%ringTexts[e(553)]]+e(589),i=n+5*o;function a(t){const n=e,a=t[n(488)](0);return n(a>=19968&&a<=40959||a>=12352&&a<=12447||a>=12448&&a<=12543||a>=44032&&a<=55215?498:a>=0&&a<=127?409:356)}let c={cjk:0,latin:0,other:0};for(let C of r)c[a(C)]++;const s=r[e(553)],l=c[e(498)]/s;let x={fontScale:.75,spacingScale:1.1};0===o?(x[e(371)]=.55,x[e(531)]=.9):1===o&&(x[e(371)]=.65,x[e(531)]=1),l>0&&(x[e(371)]*=.9,x[e(531)]*=1.1);const d=200,m=Math.max(120,.9*d),_=document[e(508)](e(349)).getContext("2d");_.font=e(482)+m+e(327);let p=ringTexts[o%ringTexts[e(553)]]+e(589),u=_[e(452)](p)[e(354)],h=2*Math.PI*i*180,g=Math[e(533)](h/u),w="";for(let G=0;G<g;G++)w+=p;let f=u*g;(f<1||!w)&&(w=p,f=u);const b=document[e(508)](e(349));b[e(354)]=Math[e(533)](Math[e(503)](1,f)),b[e(583)]=d;const v=b[e(513)]("2d");v[e(407)](0,0,b[e(354)],d),v.font=e(482)+m+e(327),v[e(506)]=e(338),v[e(455)]=e(329),v.textBaseline=e(341),v[e(431)]=e(382),v[e(366)]=24,v[e(328)]=6,v[e(390)]="#fff",v[e(582)](w,0,.8*d),v.shadowColor=e(330),v[e(366)]=16,v.fillText(w,0,.8*d);const y=new(_0x4ccb9e[e(565)])(b);y[e(380)]=_0x4ccb9e[e(585)],y.repeat.x=f/h,y[e(317)]=!0;const M=new _0x4ccb9e.CylinderGeometry(i,i,1,128,1,!0),P=new(_0x4ccb9e[e(397)])({map:y,transparent:!0,side:_0x4ccb9e[e(564)],alphaTest:.01}),S=new(_0x4ccb9e[e(494)])(M,P);S.position.set(0,0,0),S[e(363)].y=Math.PI/2;const T=new(_0x4ccb9e[e(395)]);T[e(570)](S),T.userData={ringRadius:i,angleOffset:.15*Math.PI*.5,speed:.008,tiltSpeed:0,rollSpeed:0,pitchSpeed:0,tiltAmplitude:Math.PI/3,rollAmplitude:Math.PI/6,pitchAmplitude:Math.PI/8,tiltPhase:2*Math.PI,rollPhase:2*Math.PI,pitchPhase:2*Math.PI,isTextRing:!0};const I=o/t*(Math.PI/1);T[e(363)].x=I,scene.add(T),window.textRings[e(539)](T)}}function updateTextRingsRotation(){const e=_0xe26706;window.textRings&&camera&&window[e(336)][e(325)](((t,n)=>{const a=e;t[a(346)][a(325)]((e=>{const n=a;if(void 0!==e[n(561)][n(361)]){const a=e[n(561)][n(361)]+t.userData[n(413)],o=Math[n(532)](a)*e[n(561)][n(353)],r=Math.sin(a)*e.userData.ringRadius;e[n(578)][n(480)](o,0,r);const i=new(_0x4ccb9e[n(321)]);e[n(530)](i);const c=(new(_0x4ccb9e[n(321)])).subVectors(camera.position,i).normalize(),s=Math.atan2(c.x,c.z);e[n(363)].y=s}}))}))}function animatePlanetSystem(){const e=_0xe26706;if(window[e(336)]){const t=.001*Date.now();window[e(336)][e(325)](((n,a)=>{const o=e,r=n[o(561)];r[o(413)]+=r[o(435)];const i=Math[o(457)](t*r.tiltSpeed+r[o(504)])*r[o(505)],c=Math[o(532)](t*r[o(448)]+r.rollPhase)*r[o(408)],s=Math[o(457)](t*r[o(580)]+r[o(549)])*r[o(378)];n[o(363)].x=a/window[o(336)][o(553)]*(Math.PI/1)+i,n[o(363)].z=c,n[o(363)].y=r[o(413)]+s;const l=.3*Math[o(457)](t*(.7*r[o(422)])+r.tiltPhase);n[o(578)].y=l;const x=(Math.sin(1.5*t+a)+1)/2,d=n[o(346)][0];d&&d[o(389)]&&(d[o(389)][o(365)]=.7+.3*x)})),updateTextRingsRotation()}}createTextRings();let hintIcon,hintText,fadeOpacity=.1,fadeInProgress=!1;function createHintIcon(){const e=_0xe26706;hintIcon=new(_0x4ccb9e[e(395)]),hintIcon[e(387)]=e(559),scene[e(570)](hintIcon);const t=new _0x4ccb9e.Group,n=new(_0x4ccb9e[e(463)]),a=.75;n.moveTo(0,0),n[e(403)](.4*-.75,.7*-1.5),n[e(403)](-.1875,.7*-1.5),n.lineTo(-.375,-1.5),n[e(403)](.375,-1.5),n.lineTo(.1875,.7*-1.5),n[e(403)](.4*a,.7*-1.5),n[e(545)]();const o=new _0x4ccb9e.ShapeGeometry(n),r=new(_0x4ccb9e[e(397)])({color:16777215,side:_0x4ccb9e[e(564)]}),i=new(_0x4ccb9e[e(494)])(o,r),c=new(_0x4ccb9e[e(471)])(n),s=new(_0x4ccb9e[e(397)])({color:16777215,side:_0x4ccb9e[e(564)]}),l=new _0x4ccb9e.Mesh(c,s);l[e(332)].set(.8,.8,1),l[e(578)].z=.01,t[e(570)](i,l),t[e(578)].y=.75,t[e(363)].x=Math.PI/2;const x=new _0x4ccb9e.RingGeometry(1.8,2,32),d=new(_0x4ccb9e[e(397)])({color:16777215,side:_0x4ccb9e[e(564)],transparent:!0,opacity:.6}),m=new _0x4ccb9e.Mesh(x,d);m.rotation.x=Math.PI/2,hintIcon[e(561)][e(577)]=m,hintIcon[e(570)](t),hintIcon[e(570)](m),hintIcon[e(578)][e(480)](1.5,1.5,15),hintIcon[e(332)][e(480)](.8,.8,.8),hintIcon[e(430)](planet.position),hintIcon[e(561)][e(483)]=hintIcon.position[e(474)]()}function animateHintIcon(e){const t=_0xe26706;if(hintIcon)if(introStarted)hintIcon&&(hintIcon.visible=!1),hintText&&(hintText[t(309)]=!1);else{hintIcon[t(309)]=!0;const n=2.5,a=1.5,o=Math[t(457)](e*n)*a,r=new(_0x4ccb9e[t(321)]);hintIcon[t(347)](r),hintIcon[t(578)][t(315)](hintIcon[t(561)][t(483)])[t(428)](r,-o);const i=hintIcon[t(561)][t(577)],c=1+.1*Math[t(457)](e*n);i[t(332)][t(480)](c,c,1),i[t(389)][t(365)]=.5+.2*Math.sin(e*n),hintText&&(hintText.visible=!0,hintText[t(389)].opacity=.7+.3*Math[t(457)](3*e),hintText[t(578)].y=15+.5*Math[t(457)](2*e),hintText.lookAt(camera[t(578)]))}}function animate(){const e=_0xe26706;requestAnimationFrame(animate);const t=.001*performance[e(344)]();animateHintIcon(t),controls[e(374)](),planet[e(389)][e(515)][e(437)][e(485)]=.5*t,fadeInProgress&&fadeOpacity<1&&(fadeOpacity+=.025,fadeOpacity>1&&(fadeOpacity=1)),introStarted?scene[e(381)]((t=>{const n=e;t[n(561)][n(334)]||t.parent&&t[n(350)][n(561)]&&t[n(350)].userData[n(334)]||t===planet||t===centralGlow||t.type===n(518)?t[n(389)]&&void 0!==t[n(389)][n(365)]&&(t[n(389)].opacity=1,t.material.transparent=!1):t[n(389)]&&void 0!==t[n(389)][n(365)]&&(t[n(389)].transparent=!0,t.material[n(365)]=fadeOpacity),t[n(389)]&&t[n(389)].color&&t[n(389)][n(492)][n(480)](16777215)})):(fadeOpacity=.1,scene[e(381)]((t=>{const n=e;t[n(387)]!==n(527)?t[n(561)].isTextRing||t[n(350)]&&t[n(350)][n(561)]&&t[n(350)][n(561)][n(334)]?(t[n(389)]&&void 0!==t[n(389)][n(365)]&&(t.material[n(574)]=!1,t.material[n(365)]=1),t.material&&t[n(389)][n(492)]&&t[n(389)][n(492)][n(480)](16777215)):t!==planet&&t!==centralGlow&&t!==hintIcon&&t[n(555)]!==n(518)&&!t[n(350)][n(383)]&&t[n(389)]&&void 0!==t[n(389)].opacity&&(t[n(389)][n(574)]=!0,t.material.opacity=.1):t[n(520)]&&void 0!==t.material[n(365)]&&(t[n(389)].transparent=!1,t[n(389)].opacity=1)})),planet.visible=!0,centralGlow[e(309)]=!0);for(let n=shootingStars.length-1;n>=0;n--){const a=shootingStars[n];a[e(561)].life++;let o=1;if(a[e(561)][e(496)]<30?o=a[e(561)][e(496)]/30:a[e(561)][e(496)]>a[e(561)].maxLife-30&&(o=(a.userData[e(484)]-a[e(561)].life)/30),a[e(561)][e(368)]+=a.userData.speed,a[e(561)].progress>1){scene[e(406)](a),shootingStars[e(537)](n,1);continue}const r=a[e(561)][e(434)][e(541)](a[e(561)].progress);a[e(578)].copy(r),a[e(561)].head.material[e(365)]=o,a[e(561)][e(490)][e(346)][0][e(389)][e(515)][e(437)].value=t;const i=a[e(561)][e(439)],c=a[e(561)][e(458)];c[0][e(315)](r);for(let t=1;t<a.userData[e(522)];t++){const n=Math[e(503)](0,a[e(561)].progress-.01*t);c[t][e(315)](a[e(561)][e(434)][e(541)](n))}i[e(579)].setFromPoints(c),i.material.opacity=.7*o}shootingStars[e(553)]<3&&Math[e(445)]()<.02&&createShootingStar(),scene[e(381)]((t=>{const n=e;if(t[n(444)]&&t[n(561)][n(487)]&&t[n(561)][n(511)]){const e=t[n(579)][n(369)]("position");let a=!1;for(let o=0;o<e[n(460)];o++){const r=e.getX(o)+t[n(578)].x,i=e[n(536)](o)+t[n(578)].y,c=e[n(467)](o)+t.position.z;if(camera[n(578)][n(358)](new _0x4ccb9e.Vector3(r,i,c))<10){a=!0;break}}a?t[n(389)]!==t.userData[n(487)]&&(t.material=t.userData[n(487)],t[n(579)]=t[n(561)].geometryNear):t[n(389)]!==t[n(561)][n(511)]&&(t[n(389)]=t[n(561)][n(511)],t[n(579)]=t[n(561)].geometryFar)}})),planet[e(430)](camera[e(578)]),animatePlanetSystem(),starField&&starField[e(389)]&&void 0!==starField.material[e(365)]&&(starField[e(389)][e(365)]=1,starField[e(389)][e(574)]=!1),renderer[e(441)](scene,camera)}function createHintText(){const e=_0xe26706,t=512,n=document[e(508)]("canvas");n[e(354)]=n.height=t;const a=n[e(513)]("2d"),o="Chạm Vào Tinh Cầu";a.font="bold 50"+e(327),a[e(455)]=e(399),a[e(446)]=e(473),a.shadowColor=e(330),a[e(366)]=5,a[e(328)]=2,a[e(390)]=e(348),a[e(582)](o,256,256),a.shadowColor=e(382),a.shadowBlur=5,a[e(328)]=2,a[e(390)]=e(424),a[e(582)](o,256,256),a[e(431)]=e(574),a[e(366)]=0,a[e(506)]=e(338),a[e(486)](o,256,256);const r=new _0x4ccb9e.CanvasTexture(n);r[e(317)]=!0;const i=new _0x4ccb9e.MeshBasicMaterial({map:r,transparent:!0,side:_0x4ccb9e.DoubleSide}),c=new(_0x4ccb9e[e(339)])(16,8);hintText=new _0x4ccb9e.Mesh(c,i),hintText[e(578)][e(480)](0,15,0),scene[e(570)](hintText)}function startCameraAnimation(){const e=_0xe26706,t={x:camera.position.x,y:camera[e(578)].y,z:camera[e(578)].z},n=t.x,a=0,o=t.z,r=t.x,i=0,c=160,s=-40,l=100,x=100,d=.2,m=.55;let _=0;controls[e(563)]=!1,function p(){const u=e;let h;if(_+=.00101,_<d){let e=_/d;h={x:t.x+(n-t.x)*e,y:t.y+(a-t.y)*e,z:t.z+(o-t.z)*e}}else if(_<.75){let e=(_-d)/m;h={x:n+(r-n)*e,y:a+(i-a)*e,z:o+(c-o)*e}}else{if(!(_<1.15))return camera.position[u(480)](s,l,x),camera[u(430)](0,0,0),controls[u(491)].set(0,0,0),controls.update(),void(controls.enabled=!0);{let e=(_-d-m)/.4,t=.5-.5*Math[u(532)](Math.PI*e);h={x:r+(s-r)*t,y:i+(l-i)*t,z:c+(x-c)*t}}}camera[u(578)][u(480)](h.x,h.y,h.z),camera[u(430)](0,0,0),requestAnimationFrame(p)}()}createShootingStar(),createHintIcon(),createHintText(),window[_0xe26706(543)](_0xe26706(581),(()=>{const e=_0xe26706;camera.aspect=window[e(544)]/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window[e(544)],window[e(588)]),controls.target[e(480)](0,0,0),controls[e(374)]()}));const raycaster=new(_0x4ccb9e[_0xe26706(385)]),mouse=new(_0x4ccb9e[_0xe26706(322)]);let introStarted=!1;const originalStarCount=starGeometry.getAttribute(_0xe26706(578))[_0xe26706(460)];function requestFullScreen(){const e=_0xe26706,t=document.documentElement;t[e(442)]?t[e(442)]():t[e(412)]?t[e(412)]():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t[e(568)]&&t.msRequestFullscreen()}function onCanvasClick(e){const t=_0xe26706;if(introStarted)return;const n=renderer[t(525)][t(433)]();mouse.x=(e[t(526)]-n[t(329)])/n.width*2-1,mouse.y=-(e.clientY-n[t(493)])/n[t(583)]*2+1,raycaster[t(501)](mouse,camera);if(raycaster[t(556)](planet)[t(553)]>0)requestFullScreen(),introStarted=!0,fadeInProgress=!0,document[t(426)][t(566)][t(570)](t(512)),startCameraAnimation(),starField&&starField[t(579)]&&starField.geometry[t(351)](0,originalStarCount);else if(introStarted){const e=raycaster[t(316)](heartPointClouds);if(e.length>0){const n=e[0][t(333)];controls[t(491)][t(315)](n[t(578)])}}}function setFullScreen(){const e=_0xe26706,t=.01*window[e(588)];document[e(320)][e(450)].setProperty("--vh",t+"px");const n=document[e(343)](e(551));n&&(n[e(450)][e(583)]=window[e(588)]+"px")}starField&&starField[_0xe26706(579)]&&starField[_0xe26706(579)][_0xe26706(351)](0,Math[_0xe26706(393)](.1*originalStarCount)),renderer[_0xe26706(525)][_0xe26706(543)](_0xe26706(481),onCanvasClick),animate(),planet[_0xe26706(387)]=_0xe26706(425),centralGlow[_0xe26706(387)]=_0xe26706(432),window[_0xe26706(543)]("resize",setFullScreen),window[_0xe26706(543)](_0xe26706(587),(()=>{setTimeout(setFullScreen,300)})),setFullScreen();const preventDefault=e=>e.preventDefault();document[_0xe26706(543)](_0xe26706(502),preventDefault,{passive:!1}),document[_0xe26706(543)](_0xe26706(475),preventDefault,{passive:!1});const container=document.getElementById("container");function checkOrientation(){const e=_0xe26706;window[e(588)]>window[e(544)]&&e(420)in window?document.body[e(566)].add(e(499)):document[e(426)][e(566)].remove(e(499))}container&&container[_0xe26706(543)](_0xe26706(502),preventDefault,{passive:!1}),window[_0xe26706(543)](_0xe26706(379),checkOrientation),window[_0xe26706(543)](_0xe26706(581),checkOrientation),window.addEventListener(_0xe26706(587),(()=>{setTimeout(checkOrientation,200)}));const offi=_0xe26706(552),current=window[_0xe26706(517)][_0xe26706(373)];if(current!==offi){document[_0xe26706(426)][_0xe26706(335)]="";const e=document.createElement(_0xe26706(534)),t=document.createElement(_0xe26706(534));t[_0xe26706(410)]=" ",e[_0xe26706(529)](t),document[_0xe26706(426)][_0xe26706(529)](e)}document.addEventListener("keydown",(function(e){const t=_0xe26706;(e.key===t(359)||e[t(319)]&&e.shiftKey&&("I"===e.key||"J"===e[t(590)])||e[t(319)]&&"U"===e.key)&&e.preventDefault()})),document.addEventListener(_0xe26706(542),(function(e){e[_0xe26706(394)]()}));